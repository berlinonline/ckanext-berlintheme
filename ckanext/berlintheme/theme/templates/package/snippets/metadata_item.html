{#
Construct an entry in the table of metadata for a dataset view.

name
  The field name identifying the metadata field, eg. geographical_coverage

value
  The value of the metadata field, eg. "Friedrichshain-Kreuzberg"

title
  The title of the metadata field, eg. "Geographische Abdeckung"

render_function
  A function to render the value of the metadata field, eg. h.render_datetime

create_link
  Boolean, if True create link to dataset search page (facet), if False don't.

dataset_path
  The base path for dataset search and detail pages (usually 'dataset' in CKAN)

context
  one of 'register' or 'portal'. 'register' indicates the template is being called in the 
  Datenregister context (for dataset authors), while 'portal' indicates it is being called in the
  Datenportal context (for the public).

#}

{% if value or context == 'register' %}
  {% set rendered_value = 'undefiniert' %}
  {% set value_class = '' %}
  {% if value %}
    {% set rendered_value = render_function(value) if render_function else value %}
  {% else %}
    {% set value_class = ' dp-undefined' %}
  {% endif %}
  <li>
    <div class="cell">
      <div class="text--strong">{{ _(title) }}:</div>
    </div>
    <div class="cell{{ value_class }}">
      {% if value and create_link %}
        <a href='/{{ h.berlintheme_url_with_params(dataset_path, {name: value})}}'
           alt="{{ _('Andere DatensÃ¤tze mit: ') + _(title) + ': ' + rendered_value }}">{{ rendered_value }}</a>
      {% else %}
        {{ rendered_value }}
      {% endif %}
    </div>
  </li>
{% endif %}